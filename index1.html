<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Three.ar.js Example</title>
    <script src="https://threejs.org/build/three.min.js"></script>
    <script src="https://raw.githack.com/jeromeetienne/three.ar.js/master/build/three.ar.js"></script>
</head>
<body>
    <script>
        THREEx.ArToolkitContext.baseURL = './'
        THREEx.ArToolkitContext.loadDetectionCode(arToolkitSourceBundledDataURL, function () {
            var arToolkitContext = new THREEx.ArToolkitContext({
                cameraParametersUrl: THREEx.ArToolkitContext.baseURL + 'data/data/camera_para.dat',
                detectionCodeUrl: THREEx.ArToolkitContext.baseURL + 'data/data/matrix_code3x3_parity6x6.dat',
            })
            arToolkitContext.init(function (onSuccess) {
                var arWorldRoot = new THREE.Group()
                scene.add(arWorldRoot)
                new THREEx.ArMarkerControls(arToolkitContext, arWorldRoot, {
                    type: 'pattern', patternUrl: THREEx.ArToolkitContext.baseURL + 'data/images/hiro.patt',
                    changeMatrixMode: 'cameraTransformMatrix'
                })
                onSuccess()
            })
        })

        var scene = new THREE.Scene()
        var camera = new THREE.Camera()
        scene.add(camera)
        var renderer = new THREE.WebGLRenderer({
            antialias: true, alpha: true,
            canvas: document.createElement('canvas'),
        })
        renderer.setSize(640, 480)
        renderer.domElement.style.position = 'absolute'
        renderer.domElement.style.top = '0px'
        renderer.domElement.style.left = '0px'
        document.body.appendChild(renderer.domElement)

        var geometry = new THREE.BoxGeometry(1, 1, 1)
        var material = new THREE.MeshBasicMaterial({ color: 0x00ff00 })
        var cube = new THREE.Mesh(geometry, material)
        scene.add(cube)

        function animate() {
            requestAnimationFrame(animate)
            renderer.render(scene, camera)
        }
        animate()
    </script>
</body>
</html>
